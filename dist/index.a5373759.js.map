{"mappings":"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","sources":["<anon>","src/js/snake.js"],"sourcesContent":["/*\nJavaScript Snake\nFirst version by Patrick Gillespie - I've since merged in a good number of github pull requests\nhttp://patorjk.com/games/snake\n*/ /**\n * @module Snake\n * @class SNAKE\n */ // this will allow us to access the game in other JS files when the app is loaded up in a codesandbox.com sandbox, that's the only reason it's here\nif (!window.SNAKE) window.SNAKE = {};\n/*\n    Direction explained (0 = up, etc etc)\n            0\n          3   1\n            2\n*/ const MOVE_NONE = -1;\nconst MOVE_UP = 0;\nconst MOVE_LEFT = 3;\nconst MOVE_DOWN = 2;\nconst MOVE_RIGHT = 1;\nconst MIN_SNAKE_SPEED = 25;\nconst RUSH_INCR = 5;\nconst DEFAULT_SNAKE_SPEED = 80;\nconst BOARD_NOT_READY = 0;\nconst BOARD_READY = 1;\nconst BOARD_IN_PLAY = 2;\nconst HIGH_SCORE_KEY = \"jsSnakeHighScore\";\n/**\n * @method addEventListener\n * @param {Object} obj The object to add an event listener to.\n * @param {String} event The event to listen for.\n * @param {Function} funct The function to execute when the event is triggered.\n * @param {Boolean} evtCapturing True to do event capturing, false to do event bubbling.\n */ SNAKE.addEventListener = function() {\n    if (window.addEventListener) return function(obj, event, funct, evtCapturing) {\n        obj.addEventListener(event, funct, evtCapturing);\n    };\n    else if (window.attachEvent) return function(obj, event, funct) {\n        obj.attachEvent(\"on\" + event, funct);\n    };\n}();\n/**\n * @method removeEventListener\n * @param {Object} obj The object to remove an event listener from.\n * @param {String} event The event that was listened for.\n * @param {Function} funct The function that was executed when the event is triggered.\n * @param {Boolean} evtCapturing True if event capturing was done, false otherwise.\n */ SNAKE.removeEventListener = function() {\n    if (window.removeEventListener) return function(obj, event, funct, evtCapturing) {\n        obj.removeEventListener(event, funct, evtCapturing);\n    };\n    else if (window.detachEvent) return function(obj, event, funct) {\n        obj.detachEvent(\"on\" + event, funct);\n    };\n}();\n/**\n * This class manages the snake which will reside inside of a SNAKE.Board object.\n * @class Snake\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this snake resides in), startRow and startCol.\n */ SNAKE.Snake = SNAKE.Snake || function() {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n    const blockPool = [];\n    const SnakeBlock = function() {\n        this.elm = null;\n        this.elmStyle = null;\n        this.row = -1;\n        this.col = -1;\n        this.next = null;\n        this.prev = null;\n    };\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n        let highestIndex = 0, currentIndex = 0, ii;\n        for(ii in myObj){\n            if (myObj[ii].elm.currentStyle) currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n            else if (window.getComputedStyle) currentIndex = parseFloat(document.defaultView.getComputedStyle(myObj[ii].elm, null).getPropertyValue(\"z-index\"), 10);\n            if (!isNaN(currentIndex) && currentIndex > highestIndex) highestIndex = currentIndex;\n        }\n        return highestIndex + 1;\n    }\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n    /*\n      config options:\n          playingBoard - the SnakeBoard that this snake belongs too.\n          startRow - The row the snake should start on.\n          startCol - The column the snake should start on.\n          moveSnakeWithAI - function to move the snake with AI\n  */ return function(config) {\n        if (!config || !config.playingBoard) return;\n        if (localStorage[HIGH_SCORE_KEY] === undefined) localStorage.setItem(HIGH_SCORE_KEY, 0);\n        // ----- private variables -----\n        const me = this;\n        const playingBoard = config.playingBoard;\n        const growthIncr = 5;\n        const columnShift = [\n            0,\n            1,\n            0,\n            -1\n        ];\n        const rowShift = [\n            -1,\n            0,\n            1,\n            0\n        ];\n        let prevNode;\n        let lastMove = 1, preMove = MOVE_NONE, isFirstGameMove = true, currentDirection = MOVE_NONE, snakeSpeed = DEFAULT_SNAKE_SPEED, isDead = false, isPaused = false;\n        const modeDropdown = document.getElementById(\"selectMode\");\n        if (modeDropdown) modeDropdown.addEventListener(\"change\", function(evt) {\n            evt = evt || {};\n            let val = evt.target ? parseInt(evt.target.value) : DEFAULT_SNAKE_SPEED;\n            if (isNaN(val)) val = DEFAULT_SNAKE_SPEED;\n            else if (val < MIN_SNAKE_SPEED) val = DEFAULT_SNAKE_SPEED;\n            snakeSpeed = val;\n            setTimeout(function() {\n                document.getElementById(\"game-area\").focus();\n            }, 10);\n        });\n        // ----- public variables -----\n        me.snakeBody = {};\n        me.snakeBody[\"b0\"] = new SnakeBlock(); // create snake head\n        me.snakeBody[\"b0\"].row = config.startRow || 1;\n        me.snakeBody[\"b0\"].col = config.startCol || 1;\n        me.snakeBody[\"b0\"].elm = createSnakeElement();\n        me.snakeBody[\"b0\"].elmStyle = me.snakeBody[\"b0\"].elm.style;\n        playingBoard.getBoardContainer().appendChild(me.snakeBody[\"b0\"].elm);\n        me.snakeBody[\"b0\"].elm.style.left = getLeftPosition(me.snakeBody[\"b0\"]);\n        me.snakeBody[\"b0\"].elm.style.top = getTopPosition(me.snakeBody[\"b0\"]);\n        me.snakeBody[\"b0\"].next = me.snakeBody[\"b0\"];\n        me.snakeBody[\"b0\"].prev = me.snakeBody[\"b0\"];\n        me.snakeLength = 1;\n        me.snakeHead = me.snakeBody[\"b0\"];\n        me.snakeTail = me.snakeBody[\"b0\"];\n        me.snakeHead.elm.className = me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n        me.snakeHead.elm.id = \"snake-snakehead-alive\";\n        me.snakeHead.elm.className += \" snake-snakebody-alive\";\n        // ----- private methods -----\n        function getTopPosition(block) {\n            const num = block.row * playingBoard.getBlockHeight();\n            return `${num}px`;\n        }\n        function getLeftPosition(block) {\n            const num = block.col * playingBoard.getBlockWidth();\n            return `${num}px`;\n        }\n        function createSnakeElement() {\n            const tempNode = document.createElement(\"div\");\n            tempNode.className = \"snake-snakebody-block\";\n            tempNode.style.left = \"-1000px\";\n            tempNode.style.top = \"-1000px\";\n            tempNode.style.width = playingBoard.getBlockWidth() + \"px\";\n            tempNode.style.height = playingBoard.getBlockHeight() + \"px\";\n            return tempNode;\n        }\n        function createBlocks(num) {\n            let tempBlock;\n            const tempNode = createSnakeElement();\n            for(let ii = 1; ii < num; ii++){\n                tempBlock = new SnakeBlock();\n                tempBlock.elm = tempNode.cloneNode(true);\n                tempBlock.elmStyle = tempBlock.elm.style;\n                playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n                blockPool[blockPool.length] = tempBlock;\n            }\n            tempBlock = new SnakeBlock();\n            tempBlock.elm = tempNode;\n            playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n            blockPool[blockPool.length] = tempBlock;\n        }\n        function recordScore() {\n            const highScore = localStorage[HIGH_SCORE_KEY];\n            if (me.snakeLength > highScore) {\n                alert(\"Congratulations! You have beaten your previous high score, which was \" + highScore + \".\");\n                localStorage.setItem(HIGH_SCORE_KEY, me.snakeLength);\n            }\n        }\n        function handleEndCondition(handleFunc) {\n            recordScore();\n            me.snakeHead.elm.style.zIndex = getNextHighestZIndex(me.snakeBody);\n            me.snakeHead.elm.className = me.snakeHead.elm.className.replace(/\\bsnake-snakebody-alive\\b/, \"\");\n            me.snakeHead.elm.className += \" snake-snakebody-dead\";\n            isDead = true;\n            handleFunc();\n        }\n        // ----- public methods -----\n        me.setPaused = function(val) {\n            isPaused = val;\n        };\n        me.getPaused = function() {\n            return isPaused;\n        };\n        /**\n       * This method sets the snake direction\n       * @param direction\n       */ me.setDirection = (direction)=>{\n            if (currentDirection !== lastMove) // Allow a queue of 1 premove so you can turn again before the first turn registers\n            preMove = direction;\n            if (Math.abs(direction - lastMove) !== 2 || isFirstGameMove) {\n                // Prevent snake from turning 180 degrees\n                currentDirection = direction;\n                isFirstGameMove = false;\n            }\n        };\n        /**\n       * This method is called when a user presses a key. It logs arrow key presses in \"currentDirection\", which is used when the snake needs to make its next move.\n       * @method handleArrowKeys\n       * @param {Number} keyNum A number representing the key that was pressed.\n       */ /*\n        Handles what happens when an arrow key is pressed.\n        Direction explained (0 = up, etc etc)\n                0\n              3   1\n                2\n    */ me.handleArrowKeys = function(keyNum) {\n            if (isDead || isPaused && !config.premoveOnPause) return;\n            let directionFound = MOVE_NONE;\n            switch(keyNum){\n                case 37:\n                case 65:\n                    directionFound = MOVE_LEFT;\n                    break;\n                case 38:\n                case 87:\n                    directionFound = MOVE_UP;\n                    break;\n                case 39:\n                case 68:\n                    directionFound = MOVE_RIGHT;\n                    break;\n                case 40:\n                case 83:\n                    directionFound = MOVE_DOWN;\n                    break;\n            }\n            me.setDirection(directionFound);\n        };\n        /**\n       * This method is executed for each move of the snake. It determines where the snake will go and what will happen to it. This method needs to run quickly.\n       * @method go\n       */ me.go = function() {\n            const oldHead = me.snakeHead, newHead = me.snakeTail, grid = playingBoard.grid; // cache grid for quicker lookup\n            if (isPaused === true) {\n                setTimeout(function() {\n                    me.go();\n                }, snakeSpeed);\n                return;\n            }\n            // code to execute if snake is being moved by AI\n            if (config.moveSnakeWithAI) config.moveSnakeWithAI({\n                grid,\n                snakeHead: me.snakeHead,\n                currentDirection,\n                isFirstGameMove,\n                setDirection: me.setDirection\n            });\n            me.snakeTail = newHead.prev;\n            me.snakeHead = newHead;\n            // clear the old board position\n            if (grid[newHead.row] && grid[newHead.row][newHead.col]) grid[newHead.row][newHead.col] = 0;\n            if (currentDirection !== MOVE_NONE) {\n                lastMove = currentDirection;\n                if (preMove !== MOVE_NONE) {\n                    // If the user queued up another move after the current one\n                    currentDirection = preMove; // Execute that move next time (unless overwritten)\n                    preMove = MOVE_NONE;\n                }\n            }\n            newHead.col = oldHead.col + columnShift[lastMove];\n            newHead.row = oldHead.row + rowShift[lastMove];\n            if (!newHead.elmStyle) newHead.elmStyle = newHead.elm.style;\n            newHead.elmStyle.left = getLeftPosition(newHead);\n            newHead.elmStyle.top = getTopPosition(newHead);\n            if (me.snakeLength > 1) {\n                newHead.elm.id = \"snake-snakehead-alive\";\n                oldHead.elm.id = \"\";\n            }\n            // check the new spot the snake moved into\n            if (grid[newHead.row][newHead.col] === 0) {\n                grid[newHead.row][newHead.col] = 1;\n                setTimeout(function() {\n                    me.go();\n                }, snakeSpeed);\n            } else if (grid[newHead.row][newHead.col] > 0) me.handleDeath();\n            else if (grid[newHead.row][newHead.col] === playingBoard.getGridFoodValue()) {\n                grid[newHead.row][newHead.col] = 1;\n                if (!me.eatFood()) {\n                    me.handleWin();\n                    return;\n                }\n                setTimeout(function() {\n                    me.go();\n                }, snakeSpeed);\n            }\n        };\n        /**\n       * This method is called when it is determined that the snake has eaten some food.\n       * @method eatFood\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */ me.eatFood = function() {\n            if (blockPool.length <= growthIncr) createBlocks(growthIncr * 2);\n            const blocks = blockPool.splice(0, growthIncr);\n            let ii = blocks.length, index;\n            prevNode = me.snakeTail;\n            while(ii--){\n                index = \"b\" + me.snakeLength++;\n                me.snakeBody[index] = blocks[ii];\n                me.snakeBody[index].prev = prevNode;\n                me.snakeBody[index].elm.className = me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n                me.snakeBody[index].elm.className += \" snake-snakebody-alive\";\n                prevNode.next = me.snakeBody[index];\n                prevNode = me.snakeBody[index];\n            }\n            me.snakeTail = me.snakeBody[index];\n            me.snakeTail.next = me.snakeHead;\n            me.snakeHead.prev = me.snakeTail;\n            if (!playingBoard.foodEaten()) return false;\n            //Checks if the current selected option is that of \"Rush\"\n            //If so, \"increase\" the snake speed\n            const selectDropDown = document.getElementById(\"selectMode\");\n            const selectedOption = selectDropDown.options[selectDropDown.selectedIndex];\n            if (selectedOption.text.localeCompare(\"Rush\") == 0) {\n                if (snakeSpeed > MIN_SNAKE_SPEED + RUSH_INCR) snakeSpeed -= RUSH_INCR;\n            }\n            return true;\n        };\n        /**\n       * This method handles what happens when the snake dies.\n       * @method handleDeath\n       */ me.handleDeath = function() {\n            //Reset speed\n            const selectedSpeed = document.getElementById(\"selectMode\").value;\n            snakeSpeed = parseInt(selectedSpeed);\n            handleEndCondition(playingBoard.handleDeath);\n        };\n        /**\n       * This method handles what happens when the snake wins.\n       * @method handleDeath\n       */ me.handleWin = function() {\n            handleEndCondition(playingBoard.handleWin);\n        };\n        /**\n       * This method sets a flag that lets the snake be alive again.\n       * @method rebirth\n       */ me.rebirth = function() {\n            isDead = false;\n            isFirstGameMove = true;\n            preMove = MOVE_NONE;\n        };\n        /**\n       * This method reset the snake so it is ready for a new game.\n       * @method reset\n       */ me.reset = function() {\n            if (isDead === false) return;\n            const blocks = [];\n            let curNode = me.snakeHead.next;\n            let nextNode;\n            while(curNode !== me.snakeHead){\n                nextNode = curNode.next;\n                curNode.prev = null;\n                curNode.next = null;\n                blocks.push(curNode);\n                curNode = nextNode;\n            }\n            me.snakeHead.next = me.snakeHead;\n            me.snakeHead.prev = me.snakeHead;\n            me.snakeTail = me.snakeHead;\n            me.snakeLength = 1;\n            for(let ii = 0; ii < blocks.length; ii++){\n                blocks[ii].elm.style.left = \"-1000px\";\n                blocks[ii].elm.style.top = \"-1000px\";\n                blocks[ii].elm.className = me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n                blocks[ii].elm.className += \" snake-snakebody-alive\";\n            }\n            blockPool.concat(blocks);\n            me.snakeHead.elm.className = me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n            me.snakeHead.elm.className += \" snake-snakebody-alive\";\n            me.snakeHead.elm.id = \"snake-snakehead-alive\";\n            me.snakeHead.row = config.startRow || 1;\n            me.snakeHead.col = config.startCol || 1;\n            me.snakeHead.elm.style.left = getLeftPosition(me.snakeHead);\n            me.snakeHead.elm.style.top = getTopPosition(me.snakeHead);\n        };\n        me.getSpeed = ()=>{\n            return snakeSpeed;\n        };\n        me.setSpeed = (speed)=>{\n            snakeSpeed = speed;\n        };\n        // ---------------------------------------------------------------------\n        // Initialize\n        // ---------------------------------------------------------------------\n        createBlocks(growthIncr * 2);\n    };\n}();\n/**\n * This class manages the food which the snake will eat.\n * @class Food\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this food resides in).\n */ SNAKE.Food = SNAKE.Food || function() {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n    let instanceNumber = 0;\n    function getRandomPosition(x, y) {\n        return Math.floor(Math.random() * (y + 1 - x)) + x;\n    }\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n    /*\n      config options:\n          playingBoard - the SnakeBoard that this object belongs too.\n  */ return function(config) {\n        if (!config || !config.playingBoard) return;\n        // ----- private variables -----\n        const me = this;\n        const playingBoard = config.playingBoard;\n        let fRow, fColumn;\n        const myId = instanceNumber++;\n        const elmFood = document.createElement(\"div\");\n        elmFood.setAttribute(\"id\", \"snake-food-\" + myId);\n        elmFood.className = \"snake-food-block\";\n        elmFood.style.width = playingBoard.getBlockWidth() + \"px\";\n        elmFood.style.height = playingBoard.getBlockHeight() + \"px\";\n        elmFood.style.left = \"-1000px\";\n        elmFood.style.top = \"-1000px\";\n        playingBoard.getBoardContainer().appendChild(elmFood);\n        // ----- public methods -----\n        /**\n       * @method getFoodElement\n       * @return {DOM Element} The div the represents the food.\n       */ me.getFoodElement = function() {\n            return elmFood;\n        };\n        /**\n       * Randomly places the food onto an available location on the playing board.\n       * @method randomlyPlaceFood\n       * @return {bool} Whether a food was able to spawn (true) or not (false).\n       */ me.randomlyPlaceFood = function() {\n            // if there exist some food, clear its presence from the board\n            if (playingBoard.grid[fRow] && playingBoard.grid[fRow][fColumn] === playingBoard.getGridFoodValue()) playingBoard.grid[fRow][fColumn] = 0;\n            let row = 0, col = 0, numTries = 0;\n            const maxRows = playingBoard.grid.length - 1;\n            const maxCols = playingBoard.grid[0].length - 1;\n            while(playingBoard.grid[row][col] !== 0){\n                row = getRandomPosition(1, maxRows);\n                col = getRandomPosition(1, maxCols);\n                // in some cases there may not be any room to put food anywhere\n                // instead of freezing, exit out (and return false to indicate\n                // that the player beat the game)\n                numTries++;\n                if (numTries > 20000) return false;\n            }\n            playingBoard.grid[row][col] = playingBoard.getGridFoodValue();\n            fRow = row;\n            fColumn = col;\n            elmFood.style.top = row * playingBoard.getBlockHeight() + \"px\";\n            elmFood.style.left = col * playingBoard.getBlockWidth() + \"px\";\n            return true;\n        };\n    };\n}();\n/**\n * This class manages playing board for the game.\n * @class Board\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Set fullScreen equal to true if you want the game to take up the full screen, otherwise, set the top, left, width and height parameters.\n */ SNAKE.Board = SNAKE.Board || function() {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n    let instanceNumber = 0;\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n        let highestIndex = 0, currentIndex = 0, ii;\n        for(ii in myObj){\n            if (myObj[ii].elm.currentStyle) currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n            else if (window.getComputedStyle) currentIndex = parseFloat(document.defaultView.getComputedStyle(myObj[ii].elm, null).getPropertyValue(\"z-index\"), 10);\n            if (!isNaN(currentIndex) && currentIndex > highestIndex) highestIndex = currentIndex;\n        }\n        return highestIndex + 1;\n    }\n    /*\n      This function returns the width of the available screen real estate that we have\n  */ function getClientWidth() {\n        let myWidth = 0;\n        if (typeof window.innerWidth === \"number\") myWidth = window.innerWidth; //Non-IE\n        else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) myWidth = document.documentElement.clientWidth; //IE 6+ in 'standards compliant mode'\n        else if (document.body && (document.body.clientWidth || document.body.clientHeight)) myWidth = document.body.clientWidth; //IE 4 compatible\n        return myWidth;\n    }\n    /*\n      This function returns the height of the available screen real estate that we have\n  */ function getClientHeight() {\n        let myHeight = 0;\n        if (typeof window.innerHeight === \"number\") myHeight = window.innerHeight; //Non-IE\n        else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) myHeight = document.documentElement.clientHeight; //IE 6+ in 'standards compliant mode'\n        else if (document.body && (document.body.clientWidth || document.body.clientHeight)) myHeight = document.body.clientHeight; //IE 4 compatible\n        return myHeight;\n    }\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n    return function(inputConfig) {\n        // --- private variables ---\n        const me = this;\n        const myId = instanceNumber++;\n        const config = inputConfig || {};\n        const MAX_BOARD_COLS = 250;\n        const MAX_BOARD_ROWS = 250;\n        const blockWidth = 20;\n        const blockHeight = 20;\n        const GRID_FOOD_VALUE = -1; // the value of a spot on the board that represents snake food; MUST BE NEGATIVE\n        // defaults\n        if (!config.onLengthUpdate) config.onLengthUpdate = ()=>{};\n        if (!config.onPauseToggle) config.onPauseToggle = ()=>{};\n        if (!config.onWin) config.onWin = ()=>{};\n        if (!config.onDeath) config.onDeath = ()=>{};\n        let myFood, mySnake, boardState = BOARD_READY, myKeyListener, myWindowListener, isPaused = false; //note: both the board and the snake can be paused\n        // Board components\n        let elmContainer, elmPlayingField, elmAboutPanel, elmLengthPanel, elmHighscorePanel, elmWelcome, elmTryAgain, elmWin, elmPauseScreen;\n        // --- public variables ---\n        me.grid = [];\n        // ---------------------------------------------------------------------\n        // private functions\n        // ---------------------------------------------------------------------\n        function getStartRow() {\n            return config.startRow || 2;\n        }\n        function getStartCol() {\n            return config.startCol || 2;\n        }\n        function createBoardElements() {\n            elmPlayingField = document.createElement(\"div\");\n            elmPlayingField.setAttribute(\"id\", \"playingField\");\n            elmPlayingField.className = \"snake-playing-field\";\n            SNAKE.addEventListener(elmPlayingField, \"click\", function() {\n                elmContainer.focus();\n            }, false);\n            elmPauseScreen = document.createElement(\"div\");\n            elmPauseScreen.className = \"snake-pause-screen\";\n            elmPauseScreen.innerHTML = \"<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>\";\n            elmAboutPanel = document.createElement(\"div\");\n            elmAboutPanel.className = \"snake-panel-component\";\n            elmAboutPanel.innerHTML = \"<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>\";\n            elmLengthPanel = document.createElement(\"div\");\n            elmLengthPanel.className = \"snake-panel-component\";\n            elmLengthPanel.innerHTML = \"Length: 1\";\n            elmHighscorePanel = document.createElement(\"div\");\n            elmHighscorePanel.className = \"snake-panel-component\";\n            elmHighscorePanel.innerHTML = \"Highscore: \" + (localStorage[HIGH_SCORE_KEY] || 0);\n            // if it's not AI, show the dialogs\n            if (!config.moveSnakeWithAI) {\n                elmWelcome = createWelcomeElement();\n                elmTryAgain = createTryAgainElement();\n                elmWin = createWinElement();\n            }\n            SNAKE.addEventListener(elmContainer, \"keyup\", function(evt) {\n                if (!evt) evt = window.event;\n                evt.cancelBubble = true;\n                if (evt.stopPropagation) evt.stopPropagation();\n                if (evt.preventDefault) evt.preventDefault();\n                return false;\n            }, false);\n            elmContainer.className = \"snake-game-container\";\n            elmPauseScreen.style.zIndex = 10000;\n            elmContainer.appendChild(elmPauseScreen);\n            elmContainer.appendChild(elmPlayingField);\n            elmContainer.appendChild(elmAboutPanel);\n            elmContainer.appendChild(elmLengthPanel);\n            elmContainer.appendChild(elmHighscorePanel);\n            // nothing to attach if using AI\n            if (!config.moveSnakeWithAI) {\n                elmContainer.appendChild(elmWelcome);\n                elmContainer.appendChild(elmTryAgain);\n                elmContainer.appendChild(elmWin);\n            }\n            mySnake = new SNAKE.Snake({\n                playingBoard: me,\n                startRow: getStartRow(),\n                startCol: getStartCol(),\n                premoveOnPause: config.premoveOnPause,\n                moveSnakeWithAI: config.moveSnakeWithAI\n            });\n            myFood = new SNAKE.Food({\n                playingBoard: me\n            });\n            if (elmWelcome) elmWelcome.style.zIndex = 1000;\n        }\n        function maxBoardWidth() {\n            return MAX_BOARD_COLS * me.getBlockWidth();\n        }\n        function maxBoardHeight() {\n            return MAX_BOARD_ROWS * me.getBlockHeight();\n        }\n        function createWelcomeElement() {\n            const tmpElm = document.createElement(\"div\");\n            tmpElm.id = \"sbWelcome\" + myId;\n            tmpElm.className = \"snake-welcome-dialog\";\n            const welcomeTxt = document.createElement(\"div\");\n            let fullScreenText = \"\";\n            if (config.fullScreen) fullScreenText = \"On Windows, press F11 to play in Full Screen mode.\";\n            welcomeTxt.innerHTML = \"JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. \" + fullScreenText + \"<p></p>\";\n            const welcomeStart = document.createElement(\"button\");\n            welcomeStart.appendChild(document.createTextNode(\"Play Game\"));\n            const loadGame = function() {\n                SNAKE.removeEventListener(window, \"keyup\", kbShortcut, false);\n                tmpElm.style.display = \"none\";\n                me.setBoardState(BOARD_READY);\n                me.getBoardContainer().focus();\n            };\n            const kbShortcut = function(evt) {\n                if (!evt) evt = window.event;\n                const keyNum = evt.which ? evt.which : evt.keyCode;\n                if (keyNum === 32 || keyNum === 13) loadGame();\n            };\n            SNAKE.addEventListener(window, \"keyup\", kbShortcut, false);\n            SNAKE.addEventListener(welcomeStart, \"click\", loadGame, false);\n            tmpElm.appendChild(welcomeTxt);\n            tmpElm.appendChild(welcomeStart);\n            return tmpElm;\n        }\n        function createGameEndElement(message, elmId, elmClassName) {\n            const tmpElm = document.createElement(\"div\");\n            tmpElm.id = elmId + myId;\n            tmpElm.className = elmClassName;\n            const gameEndTxt = document.createElement(\"div\");\n            gameEndTxt.innerHTML = \"JavaScript Snake<p></p>\" + message + \"<p></p>\";\n            const gameEndStart = document.createElement(\"button\");\n            gameEndStart.appendChild(document.createTextNode(\"Play Again?\"));\n            const reloadGame = function() {\n                tmpElm.style.display = \"none\";\n                me.resetBoard();\n                me.setBoardState(BOARD_READY);\n                me.getBoardContainer().focus();\n            };\n            const kbGameEndShortcut = function(evt) {\n                if (boardState !== 0 || tmpElm.style.display !== \"block\") return;\n                if (!evt) evt = window.event;\n                const keyNum = evt.which ? evt.which : evt.keyCode;\n                if (keyNum === 32 || keyNum === 13) reloadGame();\n            };\n            SNAKE.addEventListener(window, \"keyup\", kbGameEndShortcut, true);\n            SNAKE.addEventListener(gameEndStart, \"click\", reloadGame, false);\n            tmpElm.appendChild(gameEndTxt);\n            tmpElm.appendChild(gameEndStart);\n            return tmpElm;\n        }\n        function createTryAgainElement() {\n            return createGameEndElement(\"You died :(\", \"sbTryAgain\", \"snake-try-again-dialog\");\n        }\n        function createWinElement() {\n            return createGameEndElement(\"You win! :D\", \"sbWin\", \"snake-win-dialog\");\n        }\n        function handleEndCondition(elmDialog) {\n            const index = Math.max(getNextHighestZIndex(mySnake.snakeBody), getNextHighestZIndex({\n                tmp: {\n                    elm: myFood.getFoodElement()\n                }\n            }));\n            if (elmDialog) {\n                elmContainer.removeChild(elmDialog);\n                elmContainer.appendChild(elmDialog);\n                elmDialog.style.zIndex = index;\n                elmDialog.style.display = \"block\";\n            }\n            me.setBoardState(BOARD_NOT_READY);\n        }\n        // ---------------------------------------------------------------------\n        // public functions\n        // ---------------------------------------------------------------------\n        me.setPaused = function(val) {\n            isPaused = val;\n            mySnake.setPaused(val);\n            if (isPaused) elmPauseScreen.style.display = \"block\";\n            else elmPauseScreen.style.display = \"none\";\n            config.onPauseToggle(isPaused);\n        };\n        me.getPaused = function() {\n            return isPaused;\n        };\n        /**\n       * Resets the playing board for a new game.\n       * @method resetBoard\n       */ me.resetBoard = function() {\n            SNAKE.removeEventListener(elmContainer, \"keydown\", myKeyListener, false);\n            SNAKE.removeEventListener(elmContainer, \"visibilitychange\", myWindowListener, false);\n            mySnake.reset();\n            config.onLengthUpdate(1);\n            elmLengthPanel.innerHTML = \"Length: 1\";\n            me.setupPlayingField();\n            me.grid[getStartRow()][getStartCol()] = 1; // snake head\n        };\n        /**\n       * Gets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method getBoardState\n       * @return {Number} The state of the board.\n       */ me.getBoardState = function() {\n            return boardState;\n        };\n        /**\n       * Sets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method setBoardState\n       * @param {Number} state The state of the board.\n       */ me.setBoardState = function(state) {\n            boardState = state;\n        };\n        /**\n       * @method getGridFoodValue\n       * @return {Number} A number that represents food on a number representation of the playing board.\n       */ me.getGridFoodValue = function() {\n            return GRID_FOOD_VALUE;\n        };\n        /**\n       * @method getPlayingFieldElement\n       * @return {DOM Element} The div representing the playing field (this is where the snake can move).\n       */ me.getPlayingFieldElement = function() {\n            return elmPlayingField;\n        };\n        /**\n       * @method setBoardContainer\n       * @param {DOM Element or String} myContainer Sets the container element for the game.\n       */ me.setBoardContainer = function(myContainer) {\n            if (typeof myContainer === \"string\") myContainer = document.getElementById(myContainer);\n            if (myContainer === elmContainer) return;\n            elmContainer = myContainer;\n            elmPlayingField = null;\n            me.setupPlayingField();\n            me.grid[getStartRow()][getStartCol()] = 1; // snake head\n        };\n        /**\n       * @method getBoardContainer\n       * @return {DOM Element}\n       */ me.getBoardContainer = function() {\n            return elmContainer;\n        };\n        /**\n       * @method getBlockWidth\n       * @return {Number}\n       */ me.getBlockWidth = function() {\n            return blockWidth;\n        };\n        /**\n       * @method getBlockHeight\n       * @return {Number}\n       */ me.getBlockHeight = function() {\n            return blockHeight;\n        };\n        /**\n       * Sets up the playing field.\n       * @method setupPlayingField\n       */ me.setupPlayingField = function() {\n            if (!elmPlayingField) createBoardElements();\n             // create playing field\n            // calculate width of our game container\n            let cWidth, cHeight;\n            let cTop, cLeft;\n            if (config.fullScreen === true) {\n                cTop = 0;\n                cLeft = 0;\n                cWidth = getClientWidth() - 20;\n                cHeight = getClientHeight() - 20;\n            } else {\n                cTop = config.top;\n                cLeft = config.left;\n                cWidth = config.width;\n                cHeight = config.height;\n            }\n            // define the dimensions of the board and playing field\n            const wEdgeSpace = me.getBlockWidth() * 2 + cWidth % me.getBlockWidth();\n            const fWidth = Math.min(maxBoardWidth() - wEdgeSpace, cWidth - wEdgeSpace);\n            const hEdgeSpace = me.getBlockHeight() * 3 + cHeight % me.getBlockHeight();\n            const fHeight = Math.min(maxBoardHeight() - hEdgeSpace, cHeight - hEdgeSpace);\n            elmContainer.style.left = cLeft + \"px\";\n            elmContainer.style.top = cTop + \"px\";\n            elmContainer.style.width = cWidth + \"px\";\n            elmContainer.style.height = cHeight + \"px\";\n            elmPlayingField.style.left = me.getBlockWidth() + \"px\";\n            elmPlayingField.style.top = me.getBlockHeight() + \"px\";\n            elmPlayingField.style.width = fWidth + \"px\";\n            elmPlayingField.style.height = fHeight + \"px\";\n            // the math for this will need to change depending on font size, padding, etc\n            // assuming height of 14 (font size) + 8 (padding)\n            const bottomPanelHeight = hEdgeSpace - me.getBlockHeight();\n            const pLabelTop = me.getBlockHeight() + fHeight + Math.round((bottomPanelHeight - 30) / 2) + \"px\";\n            elmAboutPanel.style.top = pLabelTop;\n            elmAboutPanel.style.width = \"450px\";\n            elmAboutPanel.style.left = Math.round(cWidth / 2) - Math.round(225) + \"px\";\n            elmLengthPanel.style.top = pLabelTop;\n            elmLengthPanel.style.left = \"30px\";\n            elmHighscorePanel.style.top = pLabelTop;\n            elmHighscorePanel.style.left = cWidth - 140 + \"px\";\n            // if width is too narrow, hide the about panel\n            if (cWidth < 700) elmAboutPanel.style.display = \"none\";\n            else elmAboutPanel.style.display = \"block\";\n            me.grid = [];\n            const numBoardCols = fWidth / me.getBlockWidth() + 2;\n            const numBoardRows = fHeight / me.getBlockHeight() + 2;\n            for(let row = 0; row < numBoardRows; row++){\n                me.grid[row] = [];\n                for(let col = 0; col < numBoardCols; col++)if (col === 0 || row === 0 || col === numBoardCols - 1 || row === numBoardRows - 1) me.grid[row][col] = 1; // an edge\n                else me.grid[row][col] = 0; // empty space\n            }\n            myFood.randomlyPlaceFood();\n            config.onLengthUpdate(1);\n            myKeyListener = function(evt) {\n                if (!evt) evt = window.event;\n                const keyNum = evt.which ? evt.which : evt.keyCode;\n                if (me.getBoardState() === BOARD_READY) {\n                    if (!(keyNum >= 37 && keyNum <= 40) && !(keyNum === 87 || keyNum === 65 || keyNum === 83 || keyNum === 68)) return;\n                     // if not an arrow key, leave\n                    // This removes the listener added at the #listenerX line\n                    SNAKE.removeEventListener(elmContainer, \"keydown\", myKeyListener, false);\n                    SNAKE.removeEventListener(elmContainer, \"visibilitychange\", myWindowListener, false);\n                    myKeyListener = function(evt) {\n                        if (!evt) evt = window.event;\n                        const keyNum = evt.which ? evt.which : evt.keyCode;\n                        if (keyNum === 32) {\n                            if (me.getBoardState() != BOARD_NOT_READY) me.setPaused(!me.getPaused());\n                        }\n                        mySnake.handleArrowKeys(keyNum);\n                        evt.cancelBubble = true;\n                        if (evt.stopPropagation) evt.stopPropagation();\n                        if (evt.preventDefault) evt.preventDefault();\n                        return false;\n                    };\n                    //listener for pausing the game if user change tab or minimize the browser window\n                    document.addEventListener(\"visibilitychange\", ()=>{\n                        if (document.visibilityState === \"hidden\") {\n                            if (me.getBoardState() != BOARD_NOT_READY && !me.getPaused()) me.setPaused(true);\n                        }\n                    });\n                    SNAKE.addEventListener(elmContainer, \"keydown\", myKeyListener, false);\n                    SNAKE.addEventListener(elmContainer, \"visibilitychange\", myWindowListener, false);\n                    mySnake.rebirth();\n                    mySnake.handleArrowKeys(keyNum);\n                    me.setBoardState(BOARD_IN_PLAY); // start the game!\n                    mySnake.go();\n                }\n                evt.cancelBubble = true;\n                if (evt.stopPropagation) evt.stopPropagation();\n                if (evt.preventDefault) evt.preventDefault();\n                return false;\n            };\n            // Search for #listenerX to see where this is removed\n            if (!config.moveSnakeWithAI) {\n                SNAKE.addEventListener(elmContainer, \"keydown\", myKeyListener, false);\n                SNAKE.addEventListener(elmContainer, \"visibilitychange\", myWindowListener, false);\n            }\n        };\n        /**\n       * This method is called when the snake has eaten some food.\n       * @method foodEaten\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */ me.foodEaten = function() {\n            config.onLengthUpdate(mySnake.snakeLength);\n            elmLengthPanel.innerHTML = \"Length: \" + mySnake.snakeLength;\n            if (mySnake.snakeLength > localStorage[HIGH_SCORE_KEY]) {\n                localStorage.setItem(HIGH_SCORE_KEY, mySnake.snakeLength);\n                elmHighscorePanel.innerHTML = \"Highscore: \" + localStorage[HIGH_SCORE_KEY];\n            }\n            if (!myFood.randomlyPlaceFood()) return false;\n            return true;\n        };\n        /**\n       * This method is called when the snake dies.\n       * @method handleDeath\n       */ me.handleDeath = function() {\n            handleEndCondition(elmTryAgain);\n            config.onDeath({\n                startAIGame: me.startAIGame\n            });\n        };\n        /**\n       * This method is called when the snake wins.\n       * @method handleWin\n       */ me.handleWin = function() {\n            handleEndCondition(elmWin);\n            config.onWin({\n                startAIGame: me.startAIGame\n            });\n        };\n        me.setSpeed = (speed)=>{\n            mySnake.setSpeed(speed);\n        };\n        me.getSpeed = ()=>{\n            return mySnake.getSpeed();\n        };\n        me.startAIGame = ()=>{\n            me.resetBoard();\n            mySnake.rebirth();\n            me.setBoardState(BOARD_IN_PLAY); // start the game!\n            mySnake.go();\n        };\n        // ---------------------------------------------------------------------\n        // Initialize\n        // ---------------------------------------------------------------------\n        config.fullScreen = typeof config.fullScreen === \"undefined\" ? false : config.fullScreen;\n        config.top = typeof config.top === \"undefined\" ? 0 : config.top;\n        config.left = typeof config.left === \"undefined\" ? 0 : config.left;\n        config.width = typeof config.width === \"undefined\" ? 400 : config.width;\n        config.height = typeof config.height === \"undefined\" ? 400 : config.height;\n        config.premoveOnPause = typeof config.premoveOnPause === \"undefined\" ? false : config.premoveOnPause;\n        if (config.fullScreen) SNAKE.addEventListener(window, \"resize\", function() {\n            me.setupPlayingField();\n        }, false);\n        me.setBoardState(BOARD_NOT_READY);\n        if (config.boardContainer) me.setBoardContainer(config.boardContainer);\n        const reloadGame = function() {\n            me.resetBoard();\n            me.setBoardState(BOARD_READY);\n            me.getBoardContainer().focus();\n        };\n        if (config.onInit) config.onInit({\n            reloadGame,\n            getSpeed: me.getSpeed,\n            setSpeed: me.setSpeed,\n            startAIGame: me.startAIGame\n        });\n    }; // end return function\n}();\n\n//# sourceMappingURL=index.a5373759.js.map\n","/*\nJavaScript Snake\nFirst version by Patrick Gillespie - I've since merged in a good number of github pull requests\nhttp://patorjk.com/games/snake\n*/\n\n/**\n * @module Snake\n * @class SNAKE\n */\n\n// this will allow us to access the game in other JS files when the app is loaded up in a codesandbox.com sandbox, that's the only reason it's here\nif (!window.SNAKE) {\n  window.SNAKE = {};\n}\n\n/*\n    Direction explained (0 = up, etc etc)\n            0\n          3   1\n            2\n*/\nconst MOVE_NONE = -1;\nconst MOVE_UP = 0;\nconst MOVE_LEFT = 3;\nconst MOVE_DOWN = 2;\nconst MOVE_RIGHT = 1;\n\nconst MIN_SNAKE_SPEED = 25;\nconst RUSH_INCR = 5;\n\nconst DEFAULT_SNAKE_SPEED = 80;\n\nconst BOARD_NOT_READY = 0;\nconst BOARD_READY = 1;\nconst BOARD_IN_PLAY = 2;\n\nconst HIGH_SCORE_KEY = \"jsSnakeHighScore\";\n\n/**\n * @method addEventListener\n * @param {Object} obj The object to add an event listener to.\n * @param {String} event The event to listen for.\n * @param {Function} funct The function to execute when the event is triggered.\n * @param {Boolean} evtCapturing True to do event capturing, false to do event bubbling.\n */\nSNAKE.addEventListener = (function () {\n  if (window.addEventListener) {\n    return function (obj, event, funct, evtCapturing) {\n      obj.addEventListener(event, funct, evtCapturing);\n    };\n  } else if (window.attachEvent) {\n    return function (obj, event, funct) {\n      obj.attachEvent(\"on\" + event, funct);\n    };\n  }\n})();\n\n/**\n * @method removeEventListener\n * @param {Object} obj The object to remove an event listener from.\n * @param {String} event The event that was listened for.\n * @param {Function} funct The function that was executed when the event is triggered.\n * @param {Boolean} evtCapturing True if event capturing was done, false otherwise.\n */\n\nSNAKE.removeEventListener = (function () {\n  if (window.removeEventListener) {\n    return function (obj, event, funct, evtCapturing) {\n      obj.removeEventListener(event, funct, evtCapturing);\n    };\n  } else if (window.detachEvent) {\n    return function (obj, event, funct) {\n      obj.detachEvent(\"on\" + event, funct);\n    };\n  }\n})();\n\n/**\n * This class manages the snake which will reside inside of a SNAKE.Board object.\n * @class Snake\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this snake resides in), startRow and startCol.\n */\nSNAKE.Snake =\n  SNAKE.Snake ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    const blockPool = [];\n\n    const SnakeBlock = function () {\n      this.elm = null;\n      this.elmStyle = null;\n      this.row = -1;\n      this.col = -1;\n      this.next = null;\n      this.prev = null;\n    };\n\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n      let highestIndex = 0,\n        currentIndex = 0,\n        ii;\n      for (ii in myObj) {\n        if (myObj[ii].elm.currentStyle) {\n          currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n        } else if (window.getComputedStyle) {\n          currentIndex = parseFloat(\n            document.defaultView\n              .getComputedStyle(myObj[ii].elm, null)\n              .getPropertyValue(\"z-index\"),\n            10,\n          );\n        }\n        if (!isNaN(currentIndex) && currentIndex > highestIndex) {\n          highestIndex = currentIndex;\n        }\n      }\n      return highestIndex + 1;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    /*\n      config options:\n          playingBoard - the SnakeBoard that this snake belongs too.\n          startRow - The row the snake should start on.\n          startCol - The column the snake should start on.\n          moveSnakeWithAI - function to move the snake with AI\n  */\n    return function (config) {\n      if (!config || !config.playingBoard) {\n        return;\n      }\n      if (localStorage[HIGH_SCORE_KEY] === undefined)\n        localStorage.setItem(HIGH_SCORE_KEY, 0);\n\n      // ----- private variables -----\n\n      const me = this;\n      const playingBoard = config.playingBoard;\n      const growthIncr = 5;\n      const columnShift = [0, 1, 0, -1];\n      const rowShift = [-1, 0, 1, 0];\n      let prevNode;\n\n      let lastMove = 1,\n        preMove = MOVE_NONE,\n        isFirstGameMove = true,\n        currentDirection = MOVE_NONE, // 0: up, 1: left, 2: down, 3: right\n        snakeSpeed = DEFAULT_SNAKE_SPEED,\n        isDead = false,\n        isPaused = false;\n\n      const modeDropdown = document.getElementById(\"selectMode\");\n      if (modeDropdown) {\n        modeDropdown.addEventListener(\"change\", function (evt) {\n          evt = evt || {};\n          let val = evt.target\n            ? parseInt(evt.target.value)\n            : DEFAULT_SNAKE_SPEED;\n\n          if (isNaN(val)) {\n            val = DEFAULT_SNAKE_SPEED;\n          } else if (val < MIN_SNAKE_SPEED) {\n            val = DEFAULT_SNAKE_SPEED;\n          }\n\n          snakeSpeed = val;\n\n          setTimeout(function () {\n            document.getElementById(\"game-area\").focus();\n          }, 10);\n        });\n      }\n\n      // ----- public variables -----\n      me.snakeBody = {};\n      me.snakeBody[\"b0\"] = new SnakeBlock(); // create snake head\n      me.snakeBody[\"b0\"].row = config.startRow || 1;\n      me.snakeBody[\"b0\"].col = config.startCol || 1;\n      me.snakeBody[\"b0\"].elm = createSnakeElement();\n      me.snakeBody[\"b0\"].elmStyle = me.snakeBody[\"b0\"].elm.style;\n      playingBoard.getBoardContainer().appendChild(me.snakeBody[\"b0\"].elm);\n      me.snakeBody[\"b0\"].elm.style.left = getLeftPosition(me.snakeBody[\"b0\"]);\n      me.snakeBody[\"b0\"].elm.style.top = getTopPosition(me.snakeBody[\"b0\"]);\n      me.snakeBody[\"b0\"].next = me.snakeBody[\"b0\"];\n      me.snakeBody[\"b0\"].prev = me.snakeBody[\"b0\"];\n\n      me.snakeLength = 1;\n      me.snakeHead = me.snakeBody[\"b0\"];\n      me.snakeTail = me.snakeBody[\"b0\"];\n      me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n        /\\bsnake-snakebody-dead\\b/,\n        \"\",\n      );\n      me.snakeHead.elm.id = \"snake-snakehead-alive\";\n      me.snakeHead.elm.className += \" snake-snakebody-alive\";\n\n      // ----- private methods -----\n\n      function getTopPosition(block) {\n        const num = block.row * playingBoard.getBlockHeight();\n        return `${num}px`;\n      }\n\n      function getLeftPosition(block) {\n        const num = block.col * playingBoard.getBlockWidth();\n        return `${num}px`;\n      }\n\n      function createSnakeElement() {\n        const tempNode = document.createElement(\"div\");\n        tempNode.className = \"snake-snakebody-block\";\n        tempNode.style.left = \"-1000px\";\n        tempNode.style.top = \"-1000px\";\n        tempNode.style.width = playingBoard.getBlockWidth() + \"px\";\n        tempNode.style.height = playingBoard.getBlockHeight() + \"px\";\n        return tempNode;\n      }\n\n      function createBlocks(num) {\n        let tempBlock;\n        const tempNode = createSnakeElement();\n\n        for (let ii = 1; ii < num; ii++) {\n          tempBlock = new SnakeBlock();\n          tempBlock.elm = tempNode.cloneNode(true);\n          tempBlock.elmStyle = tempBlock.elm.style;\n          playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n          blockPool[blockPool.length] = tempBlock;\n        }\n\n        tempBlock = new SnakeBlock();\n        tempBlock.elm = tempNode;\n        playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n        blockPool[blockPool.length] = tempBlock;\n      }\n\n      function recordScore() {\n        const highScore = localStorage[HIGH_SCORE_KEY];\n        if (me.snakeLength > highScore) {\n          alert(\n            \"Congratulations! You have beaten your previous high score, which was \" +\n              highScore +\n              \".\",\n          );\n          localStorage.setItem(HIGH_SCORE_KEY, me.snakeLength);\n        }\n      }\n\n      function handleEndCondition(handleFunc) {\n        recordScore();\n        me.snakeHead.elm.style.zIndex = getNextHighestZIndex(me.snakeBody);\n        me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n          /\\bsnake-snakebody-alive\\b/,\n          \"\",\n        );\n        me.snakeHead.elm.className += \" snake-snakebody-dead\";\n\n        isDead = true;\n        handleFunc();\n      }\n\n      // ----- public methods -----\n\n      me.setPaused = function (val) {\n        isPaused = val;\n      };\n      me.getPaused = function () {\n        return isPaused;\n      };\n\n      /**\n       * This method sets the snake direction\n       * @param direction\n       */\n      me.setDirection = (direction) => {\n        if (currentDirection !== lastMove) {\n          // Allow a queue of 1 premove so you can turn again before the first turn registers\n          preMove = direction;\n        }\n        if (Math.abs(direction - lastMove) !== 2 || isFirstGameMove) {\n          // Prevent snake from turning 180 degrees\n          currentDirection = direction;\n          isFirstGameMove = false;\n        }\n      };\n\n      /**\n       * This method is called when a user presses a key. It logs arrow key presses in \"currentDirection\", which is used when the snake needs to make its next move.\n       * @method handleArrowKeys\n       * @param {Number} keyNum A number representing the key that was pressed.\n       */\n      /*\n        Handles what happens when an arrow key is pressed.\n        Direction explained (0 = up, etc etc)\n                0\n              3   1\n                2\n    */\n      me.handleArrowKeys = function (keyNum) {\n        if (isDead || (isPaused && !config.premoveOnPause)) {\n          return;\n        }\n\n        let directionFound = MOVE_NONE;\n\n        switch (keyNum) {\n          case 37:\n          case 65:\n            directionFound = MOVE_LEFT;\n            break;\n          case 38:\n          case 87:\n            directionFound = MOVE_UP;\n            break;\n          case 39:\n          case 68:\n            directionFound = MOVE_RIGHT;\n            break;\n          case 40:\n          case 83:\n            directionFound = MOVE_DOWN;\n            break;\n        }\n        me.setDirection(directionFound);\n      };\n\n      /**\n       * This method is executed for each move of the snake. It determines where the snake will go and what will happen to it. This method needs to run quickly.\n       * @method go\n       */\n      me.go = function () {\n        const oldHead = me.snakeHead,\n          newHead = me.snakeTail,\n          grid = playingBoard.grid; // cache grid for quicker lookup\n\n        if (isPaused === true) {\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n          return;\n        }\n\n        // code to execute if snake is being moved by AI\n        if (config.moveSnakeWithAI) {\n          config.moveSnakeWithAI({\n            grid,\n            snakeHead: me.snakeHead,\n            currentDirection,\n            isFirstGameMove,\n            setDirection: me.setDirection,\n          });\n        }\n\n        me.snakeTail = newHead.prev;\n        me.snakeHead = newHead;\n\n        // clear the old board position\n        if (grid[newHead.row] && grid[newHead.row][newHead.col]) {\n          grid[newHead.row][newHead.col] = 0;\n        }\n\n        if (currentDirection !== MOVE_NONE) {\n          lastMove = currentDirection;\n          if (preMove !== MOVE_NONE) {\n            // If the user queued up another move after the current one\n            currentDirection = preMove; // Execute that move next time (unless overwritten)\n            preMove = MOVE_NONE;\n          }\n        }\n\n        newHead.col = oldHead.col + columnShift[lastMove];\n        newHead.row = oldHead.row + rowShift[lastMove];\n\n        if (!newHead.elmStyle) {\n          newHead.elmStyle = newHead.elm.style;\n        }\n\n        newHead.elmStyle.left = getLeftPosition(newHead);\n        newHead.elmStyle.top = getTopPosition(newHead);\n        if (me.snakeLength > 1) {\n          newHead.elm.id = \"snake-snakehead-alive\";\n          oldHead.elm.id = \"\";\n        }\n\n        // check the new spot the snake moved into\n\n        if (grid[newHead.row][newHead.col] === 0) {\n          grid[newHead.row][newHead.col] = 1;\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n        } else if (grid[newHead.row][newHead.col] > 0) {\n          me.handleDeath();\n        } else if (\n          grid[newHead.row][newHead.col] === playingBoard.getGridFoodValue()\n        ) {\n          grid[newHead.row][newHead.col] = 1;\n          if (!me.eatFood()) {\n            me.handleWin();\n            return;\n          }\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n        }\n      };\n\n      /**\n       * This method is called when it is determined that the snake has eaten some food.\n       * @method eatFood\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */\n      me.eatFood = function () {\n        if (blockPool.length <= growthIncr) {\n          createBlocks(growthIncr * 2);\n        }\n        const blocks = blockPool.splice(0, growthIncr);\n\n        let ii = blocks.length,\n          index;\n        prevNode = me.snakeTail;\n        while (ii--) {\n          index = \"b\" + me.snakeLength++;\n          me.snakeBody[index] = blocks[ii];\n          me.snakeBody[index].prev = prevNode;\n          me.snakeBody[index].elm.className =\n            me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n          me.snakeBody[index].elm.className += \" snake-snakebody-alive\";\n          prevNode.next = me.snakeBody[index];\n          prevNode = me.snakeBody[index];\n        }\n        me.snakeTail = me.snakeBody[index];\n        me.snakeTail.next = me.snakeHead;\n        me.snakeHead.prev = me.snakeTail;\n\n        if (!playingBoard.foodEaten()) {\n          return false;\n        }\n\n        //Checks if the current selected option is that of \"Rush\"\n        //If so, \"increase\" the snake speed\n        const selectDropDown = document.getElementById(\"selectMode\");\n        const selectedOption =\n          selectDropDown.options[selectDropDown.selectedIndex];\n\n        if (selectedOption.text.localeCompare(\"Rush\") == 0) {\n          if (snakeSpeed > MIN_SNAKE_SPEED + RUSH_INCR) {\n            snakeSpeed -= RUSH_INCR;\n          }\n        }\n\n        return true;\n      };\n\n      /**\n       * This method handles what happens when the snake dies.\n       * @method handleDeath\n       */\n      me.handleDeath = function () {\n        //Reset speed\n        const selectedSpeed = document.getElementById(\"selectMode\").value;\n        snakeSpeed = parseInt(selectedSpeed);\n\n        handleEndCondition(playingBoard.handleDeath);\n      };\n\n      /**\n       * This method handles what happens when the snake wins.\n       * @method handleDeath\n       */\n      me.handleWin = function () {\n        handleEndCondition(playingBoard.handleWin);\n      };\n\n      /**\n       * This method sets a flag that lets the snake be alive again.\n       * @method rebirth\n       */\n      me.rebirth = function () {\n        isDead = false;\n        isFirstGameMove = true;\n        preMove = MOVE_NONE;\n      };\n\n      /**\n       * This method reset the snake so it is ready for a new game.\n       * @method reset\n       */\n      me.reset = function () {\n        if (isDead === false) {\n          return;\n        }\n\n        const blocks = [];\n        let curNode = me.snakeHead.next;\n        let nextNode;\n\n        while (curNode !== me.snakeHead) {\n          nextNode = curNode.next;\n          curNode.prev = null;\n          curNode.next = null;\n          blocks.push(curNode);\n          curNode = nextNode;\n        }\n        me.snakeHead.next = me.snakeHead;\n        me.snakeHead.prev = me.snakeHead;\n        me.snakeTail = me.snakeHead;\n        me.snakeLength = 1;\n\n        for (let ii = 0; ii < blocks.length; ii++) {\n          blocks[ii].elm.style.left = \"-1000px\";\n          blocks[ii].elm.style.top = \"-1000px\";\n          blocks[ii].elm.className = me.snakeHead.elm.className.replace(\n            /\\bsnake-snakebody-dead\\b/,\n            \"\",\n          );\n          blocks[ii].elm.className += \" snake-snakebody-alive\";\n        }\n\n        blockPool.concat(blocks);\n        me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n          /\\bsnake-snakebody-dead\\b/,\n          \"\",\n        );\n        me.snakeHead.elm.className += \" snake-snakebody-alive\";\n        me.snakeHead.elm.id = \"snake-snakehead-alive\";\n        me.snakeHead.row = config.startRow || 1;\n        me.snakeHead.col = config.startCol || 1;\n        me.snakeHead.elm.style.left = getLeftPosition(me.snakeHead);\n        me.snakeHead.elm.style.top = getTopPosition(me.snakeHead);\n      };\n\n      me.getSpeed = () => {\n        return snakeSpeed;\n      };\n      me.setSpeed = (speed) => {\n        snakeSpeed = speed;\n      };\n\n      // ---------------------------------------------------------------------\n      // Initialize\n      // ---------------------------------------------------------------------\n      createBlocks(growthIncr * 2);\n    };\n  })();\n\n/**\n * This class manages the food which the snake will eat.\n * @class Food\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this food resides in).\n */\n\nSNAKE.Food =\n  SNAKE.Food ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    let instanceNumber = 0;\n\n    function getRandomPosition(x, y) {\n      return Math.floor(Math.random() * (y + 1 - x)) + x;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    /*\n      config options:\n          playingBoard - the SnakeBoard that this object belongs too.\n  */\n    return function (config) {\n      if (!config || !config.playingBoard) {\n        return;\n      }\n\n      // ----- private variables -----\n\n      const me = this;\n      const playingBoard = config.playingBoard;\n      let fRow, fColumn;\n      const myId = instanceNumber++;\n\n      const elmFood = document.createElement(\"div\");\n      elmFood.setAttribute(\"id\", \"snake-food-\" + myId);\n      elmFood.className = \"snake-food-block\";\n      elmFood.style.width = playingBoard.getBlockWidth() + \"px\";\n      elmFood.style.height = playingBoard.getBlockHeight() + \"px\";\n      elmFood.style.left = \"-1000px\";\n      elmFood.style.top = \"-1000px\";\n      playingBoard.getBoardContainer().appendChild(elmFood);\n\n      // ----- public methods -----\n\n      /**\n       * @method getFoodElement\n       * @return {DOM Element} The div the represents the food.\n       */\n      me.getFoodElement = function () {\n        return elmFood;\n      };\n\n      /**\n       * Randomly places the food onto an available location on the playing board.\n       * @method randomlyPlaceFood\n       * @return {bool} Whether a food was able to spawn (true) or not (false).\n       */\n      me.randomlyPlaceFood = function () {\n        // if there exist some food, clear its presence from the board\n        if (\n          playingBoard.grid[fRow] &&\n          playingBoard.grid[fRow][fColumn] === playingBoard.getGridFoodValue()\n        ) {\n          playingBoard.grid[fRow][fColumn] = 0;\n        }\n\n        let row = 0,\n          col = 0,\n          numTries = 0;\n\n        const maxRows = playingBoard.grid.length - 1;\n        const maxCols = playingBoard.grid[0].length - 1;\n\n        while (playingBoard.grid[row][col] !== 0) {\n          row = getRandomPosition(1, maxRows);\n          col = getRandomPosition(1, maxCols);\n\n          // in some cases there may not be any room to put food anywhere\n          // instead of freezing, exit out (and return false to indicate\n          // that the player beat the game)\n          numTries++;\n          if (numTries > 20000) {\n            return false;\n          }\n        }\n\n        playingBoard.grid[row][col] = playingBoard.getGridFoodValue();\n        fRow = row;\n        fColumn = col;\n        elmFood.style.top = row * playingBoard.getBlockHeight() + \"px\";\n        elmFood.style.left = col * playingBoard.getBlockWidth() + \"px\";\n        return true;\n      };\n    };\n  })();\n\n/**\n * This class manages playing board for the game.\n * @class Board\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Set fullScreen equal to true if you want the game to take up the full screen, otherwise, set the top, left, width and height parameters.\n */\n\nSNAKE.Board =\n  SNAKE.Board ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    let instanceNumber = 0;\n\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n      let highestIndex = 0,\n        currentIndex = 0,\n        ii;\n      for (ii in myObj) {\n        if (myObj[ii].elm.currentStyle) {\n          currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n        } else if (window.getComputedStyle) {\n          currentIndex = parseFloat(\n            document.defaultView\n              .getComputedStyle(myObj[ii].elm, null)\n              .getPropertyValue(\"z-index\"),\n            10,\n          );\n        }\n        if (!isNaN(currentIndex) && currentIndex > highestIndex) {\n          highestIndex = currentIndex;\n        }\n      }\n      return highestIndex + 1;\n    }\n\n    /*\n      This function returns the width of the available screen real estate that we have\n  */\n    function getClientWidth() {\n      let myWidth = 0;\n      if (typeof window.innerWidth === \"number\") {\n        myWidth = window.innerWidth; //Non-IE\n      } else if (\n        document.documentElement &&\n        (document.documentElement.clientWidth ||\n          document.documentElement.clientHeight)\n      ) {\n        myWidth = document.documentElement.clientWidth; //IE 6+ in 'standards compliant mode'\n      } else if (\n        document.body &&\n        (document.body.clientWidth || document.body.clientHeight)\n      ) {\n        myWidth = document.body.clientWidth; //IE 4 compatible\n      }\n      return myWidth;\n    }\n\n    /*\n      This function returns the height of the available screen real estate that we have\n  */\n    function getClientHeight() {\n      let myHeight = 0;\n      if (typeof window.innerHeight === \"number\") {\n        myHeight = window.innerHeight; //Non-IE\n      } else if (\n        document.documentElement &&\n        (document.documentElement.clientWidth ||\n          document.documentElement.clientHeight)\n      ) {\n        myHeight = document.documentElement.clientHeight; //IE 6+ in 'standards compliant mode'\n      } else if (\n        document.body &&\n        (document.body.clientWidth || document.body.clientHeight)\n      ) {\n        myHeight = document.body.clientHeight; //IE 4 compatible\n      }\n      return myHeight;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    return function (inputConfig) {\n      // --- private variables ---\n      const me = this;\n      const myId = instanceNumber++;\n      const config = inputConfig || {};\n      const MAX_BOARD_COLS = 250;\n      const MAX_BOARD_ROWS = 250;\n      const blockWidth = 20;\n      const blockHeight = 20;\n      const GRID_FOOD_VALUE = -1; // the value of a spot on the board that represents snake food; MUST BE NEGATIVE\n\n      // defaults\n      if (!config.onLengthUpdate) {\n        config.onLengthUpdate = () => {};\n      }\n\n      if (!config.onPauseToggle) {\n        config.onPauseToggle = () => {};\n      }\n      if (!config.onWin) {\n        config.onWin = () => {};\n      }\n      if (!config.onDeath) {\n        config.onDeath = () => {};\n      }\n\n      let myFood,\n        mySnake,\n        boardState = BOARD_READY, // 0: in active, 1: awaiting game start, 2: playing game\n        myKeyListener,\n        myWindowListener,\n        isPaused = false; //note: both the board and the snake can be paused\n\n      // Board components\n      let elmContainer,\n        elmPlayingField,\n        elmAboutPanel,\n        elmLengthPanel,\n        elmHighscorePanel,\n        elmWelcome,\n        elmTryAgain,\n        elmWin,\n        elmPauseScreen;\n\n      // --- public variables ---\n      me.grid = [];\n\n      // ---------------------------------------------------------------------\n      // private functions\n      // ---------------------------------------------------------------------\n\n      function getStartRow() {\n        return config.startRow || 2;\n      }\n\n      function getStartCol() {\n        return config.startCol || 2;\n      }\n\n      function createBoardElements() {\n        elmPlayingField = document.createElement(\"div\");\n        elmPlayingField.setAttribute(\"id\", \"playingField\");\n        elmPlayingField.className = \"snake-playing-field\";\n\n        SNAKE.addEventListener(\n          elmPlayingField,\n          \"click\",\n          function () {\n            elmContainer.focus();\n          },\n          false,\n        );\n\n        elmPauseScreen = document.createElement(\"div\");\n        elmPauseScreen.className = \"snake-pause-screen\";\n        elmPauseScreen.innerHTML =\n          \"<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>\";\n\n        elmAboutPanel = document.createElement(\"div\");\n        elmAboutPanel.className = \"snake-panel-component\";\n        elmAboutPanel.innerHTML =\n          \"<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>\";\n\n        elmLengthPanel = document.createElement(\"div\");\n        elmLengthPanel.className = \"snake-panel-component\";\n        elmLengthPanel.innerHTML = \"Length: 1\";\n\n        elmHighscorePanel = document.createElement(\"div\");\n        elmHighscorePanel.className = \"snake-panel-component\";\n        elmHighscorePanel.innerHTML =\n          \"Highscore: \" + (localStorage[HIGH_SCORE_KEY] || 0);\n\n        // if it's not AI, show the dialogs\n        if (!config.moveSnakeWithAI) {\n          elmWelcome = createWelcomeElement();\n          elmTryAgain = createTryAgainElement();\n          elmWin = createWinElement();\n        }\n\n        SNAKE.addEventListener(\n          elmContainer,\n          \"keyup\",\n          function (evt) {\n            if (!evt) evt = window.event;\n            evt.cancelBubble = true;\n            if (evt.stopPropagation) {\n              evt.stopPropagation();\n            }\n            if (evt.preventDefault) {\n              evt.preventDefault();\n            }\n            return false;\n          },\n          false,\n        );\n\n        elmContainer.className = \"snake-game-container\";\n\n        elmPauseScreen.style.zIndex = 10000;\n        elmContainer.appendChild(elmPauseScreen);\n        elmContainer.appendChild(elmPlayingField);\n        elmContainer.appendChild(elmAboutPanel);\n        elmContainer.appendChild(elmLengthPanel);\n        elmContainer.appendChild(elmHighscorePanel);\n\n        // nothing to attach if using AI\n        if (!config.moveSnakeWithAI) {\n          elmContainer.appendChild(elmWelcome);\n          elmContainer.appendChild(elmTryAgain);\n          elmContainer.appendChild(elmWin);\n        }\n\n        mySnake = new SNAKE.Snake({\n          playingBoard: me,\n          startRow: getStartRow(),\n          startCol: getStartCol(),\n          premoveOnPause: config.premoveOnPause,\n          moveSnakeWithAI: config.moveSnakeWithAI,\n        });\n        myFood = new SNAKE.Food({ playingBoard: me });\n\n        if (elmWelcome) {\n          elmWelcome.style.zIndex = 1000;\n        }\n      }\n\n      function maxBoardWidth() {\n        return MAX_BOARD_COLS * me.getBlockWidth();\n      }\n\n      function maxBoardHeight() {\n        return MAX_BOARD_ROWS * me.getBlockHeight();\n      }\n\n      function createWelcomeElement() {\n        const tmpElm = document.createElement(\"div\");\n        tmpElm.id = \"sbWelcome\" + myId;\n        tmpElm.className = \"snake-welcome-dialog\";\n\n        const welcomeTxt = document.createElement(\"div\");\n        let fullScreenText = \"\";\n        if (config.fullScreen) {\n          fullScreenText = \"On Windows, press F11 to play in Full Screen mode.\";\n        }\n        welcomeTxt.innerHTML =\n          \"JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. \" +\n          fullScreenText +\n          \"<p></p>\";\n        const welcomeStart = document.createElement(\"button\");\n        welcomeStart.appendChild(document.createTextNode(\"Play Game\"));\n\n        const loadGame = function () {\n          SNAKE.removeEventListener(window, \"keyup\", kbShortcut, false);\n          tmpElm.style.display = \"none\";\n          me.setBoardState(BOARD_READY);\n          me.getBoardContainer().focus();\n        };\n\n        const kbShortcut = function (evt) {\n          if (!evt) evt = window.event;\n          const keyNum = evt.which ? evt.which : evt.keyCode;\n          if (keyNum === 32 || keyNum === 13) {\n            loadGame();\n          }\n        };\n\n        SNAKE.addEventListener(window, \"keyup\", kbShortcut, false);\n        SNAKE.addEventListener(welcomeStart, \"click\", loadGame, false);\n\n        tmpElm.appendChild(welcomeTxt);\n        tmpElm.appendChild(welcomeStart);\n        return tmpElm;\n      }\n\n      function createGameEndElement(message, elmId, elmClassName) {\n        const tmpElm = document.createElement(\"div\");\n        tmpElm.id = elmId + myId;\n        tmpElm.className = elmClassName;\n\n        const gameEndTxt = document.createElement(\"div\");\n        gameEndTxt.innerHTML = \"JavaScript Snake<p></p>\" + message + \"<p></p>\";\n        const gameEndStart = document.createElement(\"button\");\n        gameEndStart.appendChild(document.createTextNode(\"Play Again?\"));\n\n        const reloadGame = function () {\n          tmpElm.style.display = \"none\";\n          me.resetBoard();\n          me.setBoardState(BOARD_READY);\n          me.getBoardContainer().focus();\n        };\n\n        const kbGameEndShortcut = function (evt) {\n          if (boardState !== 0 || tmpElm.style.display !== \"block\") {\n            return;\n          }\n          if (!evt) evt = window.event;\n          const keyNum = evt.which ? evt.which : evt.keyCode;\n          if (keyNum === 32 || keyNum === 13) {\n            reloadGame();\n          }\n        };\n        SNAKE.addEventListener(window, \"keyup\", kbGameEndShortcut, true);\n\n        SNAKE.addEventListener(gameEndStart, \"click\", reloadGame, false);\n        tmpElm.appendChild(gameEndTxt);\n        tmpElm.appendChild(gameEndStart);\n        return tmpElm;\n      }\n\n      function createTryAgainElement() {\n        return createGameEndElement(\n          \"You died :(\",\n          \"sbTryAgain\",\n          \"snake-try-again-dialog\",\n        );\n      }\n\n      function createWinElement() {\n        return createGameEndElement(\"You win! :D\", \"sbWin\", \"snake-win-dialog\");\n      }\n\n      function handleEndCondition(elmDialog) {\n        const index = Math.max(\n          getNextHighestZIndex(mySnake.snakeBody),\n          getNextHighestZIndex({ tmp: { elm: myFood.getFoodElement() } }),\n        );\n        if (elmDialog) {\n          elmContainer.removeChild(elmDialog);\n          elmContainer.appendChild(elmDialog);\n          elmDialog.style.zIndex = index;\n          elmDialog.style.display = \"block\";\n        }\n        me.setBoardState(BOARD_NOT_READY);\n      }\n\n      // ---------------------------------------------------------------------\n      // public functions\n      // ---------------------------------------------------------------------\n\n      me.setPaused = function (val) {\n        isPaused = val;\n        mySnake.setPaused(val);\n        if (isPaused) {\n          elmPauseScreen.style.display = \"block\";\n        } else {\n          elmPauseScreen.style.display = \"none\";\n        }\n        config.onPauseToggle(isPaused);\n      };\n      me.getPaused = function () {\n        return isPaused;\n      };\n\n      /**\n       * Resets the playing board for a new game.\n       * @method resetBoard\n       */\n      me.resetBoard = function () {\n        SNAKE.removeEventListener(\n          elmContainer,\n          \"keydown\",\n          myKeyListener,\n          false,\n        );\n        SNAKE.removeEventListener(\n          elmContainer,\n          \"visibilitychange\",\n          myWindowListener,\n          false,\n        );\n        mySnake.reset();\n        config.onLengthUpdate(1);\n        elmLengthPanel.innerHTML = \"Length: 1\";\n        me.setupPlayingField();\n        me.grid[getStartRow()][getStartCol()] = 1; // snake head\n      };\n      /**\n       * Gets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method getBoardState\n       * @return {Number} The state of the board.\n       */\n      me.getBoardState = function () {\n        return boardState;\n      };\n      /**\n       * Sets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method setBoardState\n       * @param {Number} state The state of the board.\n       */\n      me.setBoardState = function (state) {\n        boardState = state;\n      };\n      /**\n       * @method getGridFoodValue\n       * @return {Number} A number that represents food on a number representation of the playing board.\n       */\n      me.getGridFoodValue = function () {\n        return GRID_FOOD_VALUE;\n      };\n      /**\n       * @method getPlayingFieldElement\n       * @return {DOM Element} The div representing the playing field (this is where the snake can move).\n       */\n      me.getPlayingFieldElement = function () {\n        return elmPlayingField;\n      };\n      /**\n       * @method setBoardContainer\n       * @param {DOM Element or String} myContainer Sets the container element for the game.\n       */\n      me.setBoardContainer = function (myContainer) {\n        if (typeof myContainer === \"string\") {\n          myContainer = document.getElementById(myContainer);\n        }\n        if (myContainer === elmContainer) {\n          return;\n        }\n        elmContainer = myContainer;\n        elmPlayingField = null;\n        me.setupPlayingField();\n        me.grid[getStartRow()][getStartCol()] = 1; // snake head\n      };\n      /**\n       * @method getBoardContainer\n       * @return {DOM Element}\n       */\n      me.getBoardContainer = function () {\n        return elmContainer;\n      };\n      /**\n       * @method getBlockWidth\n       * @return {Number}\n       */\n      me.getBlockWidth = function () {\n        return blockWidth;\n      };\n      /**\n       * @method getBlockHeight\n       * @return {Number}\n       */\n      me.getBlockHeight = function () {\n        return blockHeight;\n      };\n      /**\n       * Sets up the playing field.\n       * @method setupPlayingField\n       */\n      me.setupPlayingField = function () {\n        if (!elmPlayingField) {\n          createBoardElements();\n        } // create playing field\n\n        // calculate width of our game container\n        let cWidth, cHeight;\n        let cTop, cLeft;\n        if (config.fullScreen === true) {\n          cTop = 0;\n          cLeft = 0;\n          cWidth = getClientWidth() - 20;\n          cHeight = getClientHeight() - 20;\n        } else {\n          cTop = config.top;\n          cLeft = config.left;\n          cWidth = config.width;\n          cHeight = config.height;\n        }\n\n        // define the dimensions of the board and playing field\n        const wEdgeSpace =\n          me.getBlockWidth() * 2 + (cWidth % me.getBlockWidth());\n        const fWidth = Math.min(\n          maxBoardWidth() - wEdgeSpace,\n          cWidth - wEdgeSpace,\n        );\n        const hEdgeSpace =\n          me.getBlockHeight() * 3 + (cHeight % me.getBlockHeight());\n        const fHeight = Math.min(\n          maxBoardHeight() - hEdgeSpace,\n          cHeight - hEdgeSpace,\n        );\n\n        elmContainer.style.left = cLeft + \"px\";\n        elmContainer.style.top = cTop + \"px\";\n        elmContainer.style.width = cWidth + \"px\";\n        elmContainer.style.height = cHeight + \"px\";\n        elmPlayingField.style.left = me.getBlockWidth() + \"px\";\n        elmPlayingField.style.top = me.getBlockHeight() + \"px\";\n        elmPlayingField.style.width = fWidth + \"px\";\n        elmPlayingField.style.height = fHeight + \"px\";\n\n        // the math for this will need to change depending on font size, padding, etc\n        // assuming height of 14 (font size) + 8 (padding)\n        const bottomPanelHeight = hEdgeSpace - me.getBlockHeight();\n        const pLabelTop =\n          me.getBlockHeight() +\n          fHeight +\n          Math.round((bottomPanelHeight - 30) / 2) +\n          \"px\";\n\n        elmAboutPanel.style.top = pLabelTop;\n        elmAboutPanel.style.width = \"450px\";\n        elmAboutPanel.style.left =\n          Math.round(cWidth / 2) - Math.round(450 / 2) + \"px\";\n\n        elmLengthPanel.style.top = pLabelTop;\n        elmLengthPanel.style.left = 30 + \"px\";\n\n        elmHighscorePanel.style.top = pLabelTop;\n        elmHighscorePanel.style.left = cWidth - 140 + \"px\";\n\n        // if width is too narrow, hide the about panel\n        if (cWidth < 700) {\n          elmAboutPanel.style.display = \"none\";\n        } else {\n          elmAboutPanel.style.display = \"block\";\n        }\n\n        me.grid = [];\n        const numBoardCols = fWidth / me.getBlockWidth() + 2;\n        const numBoardRows = fHeight / me.getBlockHeight() + 2;\n\n        for (let row = 0; row < numBoardRows; row++) {\n          me.grid[row] = [];\n          for (let col = 0; col < numBoardCols; col++) {\n            if (\n              col === 0 ||\n              row === 0 ||\n              col === numBoardCols - 1 ||\n              row === numBoardRows - 1\n            ) {\n              me.grid[row][col] = 1; // an edge\n            } else {\n              me.grid[row][col] = 0; // empty space\n            }\n          }\n        }\n\n        myFood.randomlyPlaceFood();\n        config.onLengthUpdate(1);\n\n        myKeyListener = function (evt) {\n          if (!evt) evt = window.event;\n          const keyNum = evt.which ? evt.which : evt.keyCode;\n\n          if (me.getBoardState() === BOARD_READY) {\n            if (\n              !(keyNum >= 37 && keyNum <= 40) &&\n              !(\n                keyNum === 87 ||\n                keyNum === 65 ||\n                keyNum === 83 ||\n                keyNum === 68\n              )\n            ) {\n              return;\n            } // if not an arrow key, leave\n\n            // This removes the listener added at the #listenerX line\n            SNAKE.removeEventListener(\n              elmContainer,\n              \"keydown\",\n              myKeyListener,\n              false,\n            );\n            SNAKE.removeEventListener(\n              elmContainer,\n              \"visibilitychange\",\n              myWindowListener,\n              false,\n            );\n\n            myKeyListener = function (evt) {\n              if (!evt) evt = window.event;\n              const keyNum = evt.which ? evt.which : evt.keyCode;\n\n              if (keyNum === 32) {\n                if (me.getBoardState() != BOARD_NOT_READY)\n                  me.setPaused(!me.getPaused());\n              }\n\n              mySnake.handleArrowKeys(keyNum);\n\n              evt.cancelBubble = true;\n              if (evt.stopPropagation) {\n                evt.stopPropagation();\n              }\n              if (evt.preventDefault) {\n                evt.preventDefault();\n              }\n              return false;\n            };\n\n            //listener for pausing the game if user change tab or minimize the browser window\n            document.addEventListener(\"visibilitychange\", () => {\n              if (document.visibilityState === \"hidden\") {\n                if (me.getBoardState() != BOARD_NOT_READY && !me.getPaused())\n                  me.setPaused(true);\n              }\n            });\n\n            SNAKE.addEventListener(\n              elmContainer,\n              \"keydown\",\n              myKeyListener,\n              false,\n            );\n            SNAKE.addEventListener(\n              elmContainer,\n              \"visibilitychange\",\n              myWindowListener,\n              false,\n            );\n\n            mySnake.rebirth();\n            mySnake.handleArrowKeys(keyNum);\n            me.setBoardState(BOARD_IN_PLAY); // start the game!\n            mySnake.go();\n          }\n\n          evt.cancelBubble = true;\n          if (evt.stopPropagation) {\n            evt.stopPropagation();\n          }\n          if (evt.preventDefault) {\n            evt.preventDefault();\n          }\n          return false;\n        };\n\n        // Search for #listenerX to see where this is removed\n        if (!config.moveSnakeWithAI) {\n          SNAKE.addEventListener(elmContainer, \"keydown\", myKeyListener, false);\n          SNAKE.addEventListener(\n            elmContainer,\n            \"visibilitychange\",\n            myWindowListener,\n            false,\n          );\n        }\n      };\n\n      /**\n       * This method is called when the snake has eaten some food.\n       * @method foodEaten\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */\n      me.foodEaten = function () {\n        config.onLengthUpdate(mySnake.snakeLength);\n        elmLengthPanel.innerHTML = \"Length: \" + mySnake.snakeLength;\n        if (mySnake.snakeLength > localStorage[HIGH_SCORE_KEY]) {\n          localStorage.setItem(HIGH_SCORE_KEY, mySnake.snakeLength);\n          elmHighscorePanel.innerHTML =\n            \"Highscore: \" + localStorage[HIGH_SCORE_KEY];\n        }\n        if (!myFood.randomlyPlaceFood()) {\n          return false;\n        }\n        return true;\n      };\n\n      /**\n       * This method is called when the snake dies.\n       * @method handleDeath\n       */\n      me.handleDeath = function () {\n        handleEndCondition(elmTryAgain);\n        config.onDeath({ startAIGame: me.startAIGame });\n      };\n\n      /**\n       * This method is called when the snake wins.\n       * @method handleWin\n       */\n      me.handleWin = function () {\n        handleEndCondition(elmWin);\n        config.onWin({ startAIGame: me.startAIGame });\n      };\n\n      me.setSpeed = (speed) => {\n        mySnake.setSpeed(speed);\n      };\n      me.getSpeed = () => {\n        return mySnake.getSpeed();\n      };\n\n      me.startAIGame = () => {\n        me.resetBoard();\n        mySnake.rebirth();\n        me.setBoardState(BOARD_IN_PLAY); // start the game!\n        mySnake.go();\n      };\n\n      // ---------------------------------------------------------------------\n      // Initialize\n      // ---------------------------------------------------------------------\n\n      config.fullScreen =\n        typeof config.fullScreen === \"undefined\" ? false : config.fullScreen;\n      config.top = typeof config.top === \"undefined\" ? 0 : config.top;\n      config.left = typeof config.left === \"undefined\" ? 0 : config.left;\n      config.width = typeof config.width === \"undefined\" ? 400 : config.width;\n      config.height =\n        typeof config.height === \"undefined\" ? 400 : config.height;\n      config.premoveOnPause =\n        typeof config.premoveOnPause === \"undefined\"\n          ? false\n          : config.premoveOnPause;\n\n      if (config.fullScreen) {\n        SNAKE.addEventListener(\n          window,\n          \"resize\",\n          function () {\n            me.setupPlayingField();\n          },\n          false,\n        );\n      }\n\n      me.setBoardState(BOARD_NOT_READY);\n\n      if (config.boardContainer) {\n        me.setBoardContainer(config.boardContainer);\n      }\n\n      const reloadGame = function () {\n        me.resetBoard();\n        me.setBoardState(BOARD_READY);\n        me.getBoardContainer().focus();\n      };\n\n      if (config.onInit) {\n        config.onInit({\n          reloadGame,\n          getSpeed: me.getSpeed,\n          setSpeed: me.setSpeed,\n          startAIGame: me.startAIGame,\n        });\n      }\n    }; // end return function\n  })();\n"],"names":["window","SNAKE","HIGH_SCORE_KEY","addEventListener","obj","event","funct","evtCapturing","attachEvent","removeEventListener","detachEvent","Snake","blockPool","SnakeBlock","elm","elmStyle","row","col","next","prev","config","prevNode","playingBoard","undefined","localStorage","setItem","me","columnShift","rowShift","lastMove","preMove","isFirstGameMove","currentDirection","snakeSpeed","isDead","isPaused","modeDropdown","document","getElementById","getTopPosition","block","num","getBlockHeight","getLeftPosition","getBlockWidth","createSnakeElement","tempNode","createElement","className","style","left","top","width","height","createBlocks","tempBlock","ii","cloneNode","getBoardContainer","appendChild","length","handleEndCondition","handleFunc","recordScore","highScore","snakeLength","alert","snakeHead","zIndex","getNextHighestZIndex","myObj","highestIndex","currentIndex","currentStyle","parseFloat","getComputedStyle","defaultView","getPropertyValue","isNaN","snakeBody","replace","evt","val","target","parseInt","value","setTimeout","focus","startRow","startCol","snakeTail","id","setPaused","getPaused","setDirection","direction","Math","abs","handleArrowKeys","keyNum","premoveOnPause","directionFound","go","oldHead","newHead","grid","moveSnakeWithAI","handleDeath","getGridFoodValue","eatFood","handleWin","growthIncr","blocks","splice","index","foodEaten","selectDropDown","selectedOption","options","selectedIndex","text","localeCompare","MIN_SNAKE_SPEED","rebirth","reset","nextNode","curNode","push","concat","getSpeed","setSpeed","speed","Food","instanceNumber","getRandomPosition","x","y","floor","random","fRow","fColumn","myId","elmFood","setAttribute","getFoodElement","randomlyPlaceFood","numTries","maxRows","maxCols","Board","inputConfig","elmContainer","elmPlayingField","elmAboutPanel","elmLengthPanel","elmHighscorePanel","elmWelcome","elmTryAgain","elmWin","elmPauseScreen","onLengthUpdate","onPauseToggle","onWin","onDeath","myFood","mySnake","boardState","myKeyListener","myWindowListener","getStartRow","getStartCol","createGameEndElement","message","elmId","elmClassName","tmpElm","gameEndTxt","innerHTML","gameEndStart","createTextNode","reloadGame","display","resetBoard","setBoardState","which","keyCode","elmDialog","max","tmp","removeChild","setupPlayingField","getBoardState","state","getPlayingFieldElement","setBoardContainer","myContainer","cWidth","cHeight","cTop","cLeft","createWelcomeElement","welcomeTxt","fullScreenText","fullScreen","welcomeStart","loadGame","kbShortcut","cancelBubble","stopPropagation","preventDefault","myWidth","myHeight","innerWidth","documentElement","clientWidth","clientHeight","body","innerHeight","wEdgeSpace","fWidth","min","maxBoardWidth","hEdgeSpace","fHeight","maxBoardHeight","bottomPanelHeight","pLabelTop","round","numBoardCols","numBoardRows","visibilityState","startAIGame","boardContainer","onInit"],"version":3,"file":"index.a5373759.js.map"}